window.__require=function t(e,i,n){function c(r,s){if(!i[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var d="function"==typeof __require&&__require;if(!s&&d)return d(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){return c(e[r][1][t]||t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)c(n[r]);return c}({Fruit:[function(t,e){"use strict";cc._RF.push(e,"365b4UAiQRBA7QXa2IuFMmj","Fruit"),cc.Class({extends:cc.Component,properties:{id:0},init:function(t){this.id=t.id,this.node.getComponent(cc.Sprite).spriteFrame=t.iconSF},start:function(){},onBeginContact:function(t,e,i){if(e.node&&i.node){var n=e.node.getComponent("Fruit"),c=i.node.getComponent("Fruit");n&&c&&n.id===c.id&&n.id<9?e.node.emit("sameContact",{self:e,other:i}):e.node.emit("checkBound",{self:e,other:i})}}}),cc._RF.pop()},{}],Game:[function(t,e){"use strict";cc._RF.push(e,"8e80dMWyH5LD7Oj100K42f8","Game");var i=cc.Class({name:"FruitItem",properties:{id:0,iconSF:cc.SpriteFrame}}),n=cc.Class({name:"JuiceItem",properties:{particle:cc.SpriteFrame,circle:cc.SpriteFrame,slash:cc.SpriteFrame}});cc.Class({extends:cc.Component,properties:{fruits:{default:[],type:i},titleText:{default:null,type:cc.Node},score:{default:null,type:cc.Node},ground:{default:null,type:cc.Node},endNodeBG:{default:null,type:cc.Node},endNode:{default:null,type:cc.Node},juices:{default:[],type:n},fruitPrefab:{default:null,type:cc.Prefab},juicePrefab:{default:null,type:cc.Prefab},boomAudio:{default:null,type:cc.AudioClip},knockAudio:{default:null,type:cc.AudioClip},waterAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.lastWidth=this.node.width,this.count=0,this.score=this.score.getComponent(cc.Label),this.ground.y=15,this.isCreating=!1,this.fruitCount=0,this.isEnd=!1,this.topBound=15,this.buttomBound=15,this.initPhysics(),this.initBound(),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),cc.view.resizeWithBrowserSize(!1),this.initOneFruit();for(var t=0,e=["\u5f00\u53d1\u8005:\u539f\u9879\u76ee\u5f00\u53d1(\u6682\u672a\u627e\u5230),JinYu","\u672c\u9879\u76ee\u4ed3\u5e93\u5730\u5740\uff1ahttps://github.com/Kingfish404/Make-WUT","\u539f\u9879\u76ee\uff1a\u6b66\u6c49\u7406\u5de5\u5927\u5b66","\u5317\u4eac\u6797\u4e1a\u5927\u5b66\u4fe1\u606f\u5b66\u9662\u6570\u5b57\u5a92\u4f53\u6280\u672f ByCZH","\u7ffb\u5236date:2022-01-25"];t<e.length;t++){var i=e[t];console.log(i)}},initPhysics:function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,-960),cc.director.getCollisionManager().enabled=!0},initBound:function(){this.titleText.x=15,this.score.node.x=this.node.width-15;var t=this.node.width,e=this.node.height,i=new cc.Node;i.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var n=function(t,e,i,n,c){var o=t.addComponent(cc.PhysicsBoxCollider);o.offset.x=e,o.offset.y=i,o.size.width=n,o.size.height=c};n(i,0,-e/2+this.buttomBound,t,1),n(i,0,e/2,t,1),n(i,-t/2,0,1,e),n(i,t/2,0,1,e),i.parent=this.node},initOneFruit:function(t){void 0===t&&(t=1),this.fruitCount++,this.currentFruit=this.createFruitOnPos(0,400,t)},onTouchEnd:function(t){var e=this;if(!this.isCreating)if(this.isEnd)this.currentFruit&&(this.currentFruit,this.currentFruit.removeFromParent(!1));else{this.lastWidth!=this.node.width&&this.initBound(),this.isCreating=!0;var i=this.currentFruit,n=this.node.width,c=t.getLocation().x-n/2;i.x=c,cc.tween(i).by(0,{position:cc.v2(0,0)},{easing:function(t){return 1e5*t*t}}).call(function(){e.startFruitPhysics(i),e.scheduleOnce(function(){var t=e.getNextFruitId();e.initOneFruit(t),e.isCreating=!1},.75)}).start()}},onTouchMove:function(t){if(!this.isCreating){var e,i=this.node.width,n=t.getLocation();n.x<=this.currentFruit.width/2||n.x>=i-this.currentFruit.width/2||(e=n.x-i/2,this.currentFruit.x=e)}},getNextFruitId:function(){return this.fruitCount<3?1:3===this.fruitCount?2:Math.floor(5*Math.random())+1},createOneFruit:function(t){var e=cc.instantiate(this.fruitPrefab),i=this.fruits[t-1];return e.getComponent("Fruit").init({id:i.id,iconSF:i.iconSF}),e.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,e.getComponent(cc.PhysicsCircleCollider).radius=0,this.node.addChild(e),e.scale=.6,e.on("sameContact",this.onSameFruitContact.bind(this)),e.on("checkBound",this.onCheckBound.bind(this)),e},startFruitPhysics:function(t){t.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic;var e=t.getComponent(cc.PhysicsCircleCollider);e.radius=t.height/2,e.apply()},createFruitOnPos:function(t,e,i){void 0===i&&(i=1);var n=this.createOneFruit(i);return cc.tween(n).to(.25,{scale:.8}).start(),n.setPosition(cc.v2(t,e)),n},onSameFruitContact:function(t){var e=t.self,i=t.other;i.node.off("sameContact");var n=i.getComponent("Fruit").id;e.node.removeFromParent(!1),i.node.removeFromParent(!1);var c=i.node,o=c.x,r=c.y;this.createFruitJuice(n,cc.v2({x:o,y:r}),i.node.width);var s=n+1;if(s<=9){8==s&&this.count++,9==s&&(s=1);var a=this.createFruitOnPos(o,r,s);this.score.string=String(parseInt(this.score.string)+10*s),this.startFruitPhysics(a),a.scale=0,cc.tween(a).to(.5,{scale:.8},{easing:"backOut"}).start()}else console.log(" todo \u5408\u6210\u4e24\u4e2a\u6700\u5927\u7684 \u8fd8\u6ca1\u6709\u5b9e\u73b0\u54e6~ ")},onCheckBound:function(t){var e=this,i=t.self;if(t.other,this.lastWidth==this.node.width&&i.node.y+i.node.width/2>this.node.y-this.topBound){var n=i.node.x;setTimeout(function(){if(e.lastWidth==e.node.width&&n==i.node.x&&i.node.y+i.node.width/2>e.node.y-e.topBound){console.log("\u8d85\u51fa\u8303\u56f4\u5566"),e.endNode.x=e.node.width/2,e.endNode.y=e.node.height/2,e.endNodeBG.x=e.node.width/2,e.endNodeBG.y=e.node.height/2;var t=e.endNode.getComponent(cc.Label);0==e.count||(t.string="\u606d\u559c\u4f60\u5408\u6210\u4e86\n\n"+e.count+"\u4e2a\u5317\u6797\u7eff\u56e2"),e.isEnd=!0}},1500)}},createFruitJuice:function(t,e,i){cc.audioEngine.play(this.boomAudio,!1,1),cc.audioEngine.play(this.waterAudio,!1,1);var n=cc.instantiate(this.juicePrefab);this.node.addChild(n);var c=this.juices[t-1],o=n.getComponent("Juice");o.init(c),o.showJuice(e,i)}}),cc._RF.pop()},{}],Juice:[function(t,e){"use strict";cc._RF.push(e,"56c1eHSOMxI0L+m6MX8FMXw","Juice");var i=function(t,e){return Math.floor(Math.random()*(e-t)+t)};cc.Class({extends:cc.Component,properties:{particle:{default:null,type:cc.SpriteFrame},circle:{default:null,type:cc.SpriteFrame},slash:{default:null,type:cc.SpriteFrame}},init:function(t){this.particle=t.particle,this.circle=t.particle,this.slash=t.slash},showJuice:function(t,e){for(var n=this,c=function(c){var o=new cc.Node("Sprite");o.addComponent(cc.Sprite).spriteFrame=n.particle,o.parent=n.node;var r=359*Math.random(),s=(c=30*Math.random()+e/2,cc.v2(Math.sin(r*Math.PI/180)*c,Math.cos(r*Math.PI/180)*c));o.scale=.5*Math.random()+e/100;var a=.5*Math.random();o.position=t,o.runAction(cc.sequence(cc.spawn(cc.moveBy(a,s),cc.scaleTo(a+.5,.3),cc.rotateBy(a+.5,i(-360,360))),cc.fadeOut(.1),cc.callFunc(function(){o.active=!1},n)))},o=0;o<10;++o)c(o);for(var r=function(){var i=new cc.Node("Sprite");i.addComponent(cc.Sprite).spriteFrame=n.circle,i.parent=n.node;var c=359*Math.random(),o=30*Math.random()+e/2,r=cc.v2(Math.sin(c*Math.PI/180)*o,Math.cos(c*Math.PI/180)*o);i.scale=.5*Math.random()+e/100;var s=.5*Math.random();i.position=t,i.runAction(cc.sequence(cc.spawn(cc.moveBy(s,r),cc.scaleTo(s+.5,.3)),cc.fadeOut(.1),cc.callFunc(function(){i.active=!1},n)))},s=0;s<20;s++)r();var a=new cc.Node("Sprite");a.addComponent(cc.Sprite).spriteFrame=this.slash,a.parent=this.node,a.position=t,a.scale=0,a.angle=i(0,360),a.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2,e/150),cc.fadeOut(1)),cc.callFunc(function(){a.active=!1})))}}),cc._RF.pop()},{}]},{},["Fruit","Game","Juice"]);