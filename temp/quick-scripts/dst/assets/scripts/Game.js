
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/Game.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '8e80dMWyH5LD7Oj100K42f8', 'Game');
// scripts/Game.js

"use strict";

var Fruit = cc.Class({
  name: 'FruitItem',
  properties: {
    id: 0,
    iconSF: cc.SpriteFrame
  }
});
var JuiceItem = cc.Class({
  name: 'JuiceItem',
  properties: {
    particle: cc.SpriteFrame,
    circle: cc.SpriteFrame,
    slash: cc.SpriteFrame
  }
});
cc.Class({
  "extends": cc.Component,
  properties: {
    fruits: {
      "default": [],
      type: Fruit
    },
    titleText: {
      "default": null,
      type: cc.Node
    },
    score: {
      "default": null,
      type: cc.Node
    },
    ground: {
      "default": null,
      type: cc.Node
    },
    endNodeBG: {
      "default": null,
      type: cc.Node
    },
    endNode: {
      "default": null,
      type: cc.Node
    },
    juices: {
      "default": [],
      type: JuiceItem
    },
    // 动态生成 找到批量处理预置元素的方案
    fruitPrefab: {
      "default": null,
      type: cc.Prefab
    },
    juicePrefab: {
      "default": null,
      type: cc.Prefab
    },
    // todo 可以实现一个audioManager
    boomAudio: {
      "default": null,
      type: cc.AudioClip
    },
    knockAudio: {
      "default": null,
      type: cc.AudioClip
    },
    waterAudio: {
      "default": null,
      type: cc.AudioClip
    }
  },
  onLoad: function onLoad() {
    // 记录当前屏幕大小
    this.lastWidth = this.node.width; // 记录北京林业数量

    this.count = 0;
    this.score = this.score.getComponent(cc.Label); // 设置地面位置

    this.ground.y = 15;
    this.isCreating = false;
    this.fruitCount = 0;
    this.isEnd = false; // 距离上边界的位置

    this.topBound = 15; // 地面位置

    this.buttomBound = 15;
    this.initPhysics();
    this.initBound(); // 监听点击事件 todo 是否能够注册全局事件

    this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);
    this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);
    cc.view.resizeWithBrowserSize(false);
    this.initOneFruit();
    var meta = ["开发者:原项目开发(暂未找到),JinYu", "本项目仓库地址：https://github.com/Kingfish404/Make-WUT", "原项目：武汉理工大学", "北京林业大学信息学院数字媒体技术 ByCZH", "翻制date:2022-01-25"];

    for (var _i = 0, _meta = meta; _i < _meta.length; _i++) {
      var i = _meta[_i];
      console.log(i);
    }
  },
  // 开启物理引擎和碰撞检测
  initPhysics: function initPhysics() {
    // 物理引擎
    var instance = cc.director.getPhysicsManager();
    instance.enabled = true; // instance.debugDrawFlags = 4

    instance.gravity = cc.v2(0, -960); // 碰撞检测

    var collisionManager = cc.director.getCollisionManager();
    collisionManager.enabled = true;
  },
  // 设置边界和UI位置
  initBound: function initBound() {
    // 设置标题位置
    this.titleText.x = 15; // 设置分数位置

    this.score.node.x = this.node.width - 15; // 设置四周的碰撞区域

    var width = this.node.width;
    var height = this.node.height;
    var node = new cc.Node();
    var body = node.addComponent(cc.RigidBody);
    body.type = cc.RigidBodyType.Static;

    var _addBound = function _addBound(node, x, y, width, height) {
      var collider = node.addComponent(cc.PhysicsBoxCollider);
      collider.offset.x = x;
      collider.offset.y = y;
      collider.size.width = width;
      collider.size.height = height;
    };

    _addBound(node, 0, -height / 2 + this.buttomBound, width, 1);

    _addBound(node, 0, height / 2, width, 1);

    _addBound(node, -width / 2, 0, 1, height);

    _addBound(node, width / 2, 0, 1, height);

    node.parent = this.node;
  },
  initOneFruit: function initOneFruit(id) {
    if (id === void 0) {
      id = 1;
    }

    this.fruitCount++;
    this.currentFruit = this.createFruitOnPos(0, 400, id);
  },
  // 监听屏幕点击完毕
  onTouchEnd: function onTouchEnd(e) {
    var _this = this;

    if (this.isCreating) {
      return;
    }

    if (this.isEnd) {
      if (this.currentFruit) {
        var cur = this.currentFruit;
        this.currentFruit.removeFromParent(false);
      }

      return;
    }

    if (this.lastWidth != this.node.width) {
      // 屏幕大小改变了，重新设置边界
      this.initBound();
    }

    this.isCreating = true;
    var fruit = this.currentFruit;
    var width = this.node.width;
    var pos = e.getLocation();
    var x = pos.x - width / 2;
    fruit.x = x;
    cc.tween(fruit).by(0, {
      position: cc.v2(0, 0)
    }, {
      easing: function easing(t) {
        return 100000 * t * t;
      }
    }).call(function () {
      // 开启物理效果
      _this.startFruitPhysics(fruit); // 0.75s后重新生成一个


      _this.scheduleOnce(function () {
        var nextId = _this.getNextFruitId();

        _this.initOneFruit(nextId);

        _this.isCreating = false;
      }, 0.75);
    }).start();
  },
  // 监听屏幕移动
  onTouchMove: function onTouchMove(e) {
    if (this.isCreating) {
      return;
    }

    var width = this.node.width;
    var pos = e.getLocation();
    var x;

    if (pos.x <= this.currentFruit.width / 2 || pos.x >= width - this.currentFruit.width / 2) {
      return;
    } else {
      x = pos.x - width / 2;
    }

    this.currentFruit.x = x;
  },
  // 获取下一个水果的id
  getNextFruitId: function getNextFruitId() {
    if (this.fruitCount < 3) {
      return 1;
    } else if (this.fruitCount === 3) {
      return 2;
    } else {
      // 随机返回前5个
      return Math.floor(Math.random() * 5) + 1;
    }
  },
  // 创建一个水果
  createOneFruit: function createOneFruit(num) {
    var fruit = cc.instantiate(this.fruitPrefab);
    var config = this.fruits[num - 1];
    fruit.getComponent('Fruit').init({
      id: config.id,
      iconSF: config.iconSF
    });
    fruit.getComponent(cc.RigidBody).type = cc.RigidBodyType.Static;
    fruit.getComponent(cc.PhysicsCircleCollider).radius = 0;
    this.node.addChild(fruit);
    fruit.scale = 0.6; // 有Fruit组件传入

    fruit.on('sameContact', this.onSameFruitContact.bind(this));
    fruit.on('checkBound', this.onCheckBound.bind(this));
    return fruit;
  },
  startFruitPhysics: function startFruitPhysics(fruit) {
    fruit.getComponent(cc.RigidBody).type = cc.RigidBodyType.Dynamic;
    var physicsCircleCollider = fruit.getComponent(cc.PhysicsCircleCollider);
    physicsCircleCollider.radius = fruit.height / 2;
    physicsCircleCollider.apply();
  },
  // 在指定位置生成水果
  createFruitOnPos: function createFruitOnPos(x, y, type) {
    if (type === void 0) {
      type = 1;
    }

    var fruit = this.createOneFruit(type);
    cc.tween(fruit).to(0.25, {
      scale: 0.8
    }).start();
    fruit.setPosition(cc.v2(x, y));
    return fruit;
  },
  // 两个水果碰撞
  onSameFruitContact: function onSameFruitContact(_ref) {
    var self = _ref.self,
        other = _ref.other;
    other.node.off('sameContact'); // 两个node都会触发，todo 看看有没有其他方法只展示一次的

    var id = other.getComponent('Fruit').id; // todo 可以使用对象池回收

    self.node.removeFromParent(false);
    other.node.removeFromParent(false);
    var _other$node = other.node,
        x = _other$node.x,
        y = _other$node.y;
    this.createFruitJuice(id, cc.v2({
      x: x,
      y: y
    }), other.node.width);
    var nextId = id + 1;

    if (nextId <= 9) {
      if (nextId == 8) {
        // 统计数量
        this.count++;
      }

      if (nextId == 9) {
        nextId = 1;
      }

      var newFruit = this.createFruitOnPos(x, y, nextId); // 分数累加

      this.score.string = String(parseInt(this.score.string) + nextId * 10);
      this.startFruitPhysics(newFruit); // 展示动画 todo 动画效果需要调整

      newFruit.scale = 0;
      cc.tween(newFruit).to(.5, {
        scale: 0.8
      }, {
        easing: "backOut"
      }).start();
    } else {
      // todo 合成两个西瓜
      console.log(' todo 合成两个最大的 还没有实现哦~ ');
    }
  },
  // 检测当前的两个水果是否超出边界了
  onCheckBound: function onCheckBound(_ref2) {
    var _this2 = this;

    var self = _ref2.self,
        other = _ref2.other;

    if (this.lastWidth == this.node.width && self.node.y + self.node.width / 2 > this.node.y - this.topBound) {
      // TODO fix bug in here
      var last_x = self.node.x;
      setTimeout(function () {
        if (_this2.lastWidth == _this2.node.width && last_x == self.node.x && self.node.y + self.node.width / 2 > _this2.node.y - _this2.topBound) {
          console.log("超出范围啦"); // 设置显示结束

          _this2.endNode.x = _this2.node.width / 2;
          _this2.endNode.y = _this2.node.height / 2;
          _this2.endNodeBG.x = _this2.node.width / 2;
          _this2.endNodeBG.y = _this2.node.height / 2;

          var end_msg = _this2.endNode.getComponent(cc.Label);

          if (_this2.count == 0) {} else {
            end_msg.string = '恭喜你合成了\n\n' + _this2.count + '个北林绿团';
          }

          _this2.isEnd = true;
        }
      }, 1500);
    }
  },
  // 合并时的动画效果
  createFruitJuice: function createFruitJuice(id, pos, n) {
    // 播放合并的声音
    cc.audioEngine.play(this.boomAudio, false, 1);
    cc.audioEngine.play(this.waterAudio, false, 1); // 展示动画

    var juice = cc.instantiate(this.juicePrefab);
    this.node.addChild(juice);
    var config = this.juices[id - 1];
    var instance = juice.getComponent('Juice');
    instance.init(config);
    instance.showJuice(pos, n);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcR2FtZS5qcyJdLCJuYW1lcyI6WyJGcnVpdCIsImNjIiwiQ2xhc3MiLCJuYW1lIiwicHJvcGVydGllcyIsImlkIiwiaWNvblNGIiwiU3ByaXRlRnJhbWUiLCJKdWljZUl0ZW0iLCJwYXJ0aWNsZSIsImNpcmNsZSIsInNsYXNoIiwiQ29tcG9uZW50IiwiZnJ1aXRzIiwidHlwZSIsInRpdGxlVGV4dCIsIk5vZGUiLCJzY29yZSIsImdyb3VuZCIsImVuZE5vZGVCRyIsImVuZE5vZGUiLCJqdWljZXMiLCJmcnVpdFByZWZhYiIsIlByZWZhYiIsImp1aWNlUHJlZmFiIiwiYm9vbUF1ZGlvIiwiQXVkaW9DbGlwIiwia25vY2tBdWRpbyIsIndhdGVyQXVkaW8iLCJvbkxvYWQiLCJsYXN0V2lkdGgiLCJub2RlIiwid2lkdGgiLCJjb3VudCIsImdldENvbXBvbmVudCIsIkxhYmVsIiwieSIsImlzQ3JlYXRpbmciLCJmcnVpdENvdW50IiwiaXNFbmQiLCJ0b3BCb3VuZCIsImJ1dHRvbUJvdW5kIiwiaW5pdFBoeXNpY3MiLCJpbml0Qm91bmQiLCJvbiIsIkV2ZW50VHlwZSIsIlRPVUNIX0VORCIsIm9uVG91Y2hFbmQiLCJUT1VDSF9NT1ZFIiwib25Ub3VjaE1vdmUiLCJ2aWV3IiwicmVzaXplV2l0aEJyb3dzZXJTaXplIiwiaW5pdE9uZUZydWl0IiwibWV0YSIsImkiLCJjb25zb2xlIiwibG9nIiwiaW5zdGFuY2UiLCJkaXJlY3RvciIsImdldFBoeXNpY3NNYW5hZ2VyIiwiZW5hYmxlZCIsImdyYXZpdHkiLCJ2MiIsImNvbGxpc2lvbk1hbmFnZXIiLCJnZXRDb2xsaXNpb25NYW5hZ2VyIiwieCIsImhlaWdodCIsImJvZHkiLCJhZGRDb21wb25lbnQiLCJSaWdpZEJvZHkiLCJSaWdpZEJvZHlUeXBlIiwiU3RhdGljIiwiX2FkZEJvdW5kIiwiY29sbGlkZXIiLCJQaHlzaWNzQm94Q29sbGlkZXIiLCJvZmZzZXQiLCJzaXplIiwicGFyZW50IiwiY3VycmVudEZydWl0IiwiY3JlYXRlRnJ1aXRPblBvcyIsImUiLCJjdXIiLCJyZW1vdmVGcm9tUGFyZW50IiwiZnJ1aXQiLCJwb3MiLCJnZXRMb2NhdGlvbiIsInR3ZWVuIiwiYnkiLCJwb3NpdGlvbiIsImVhc2luZyIsInQiLCJjYWxsIiwic3RhcnRGcnVpdFBoeXNpY3MiLCJzY2hlZHVsZU9uY2UiLCJuZXh0SWQiLCJnZXROZXh0RnJ1aXRJZCIsInN0YXJ0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY3JlYXRlT25lRnJ1aXQiLCJudW0iLCJpbnN0YW50aWF0ZSIsImNvbmZpZyIsImluaXQiLCJQaHlzaWNzQ2lyY2xlQ29sbGlkZXIiLCJyYWRpdXMiLCJhZGRDaGlsZCIsInNjYWxlIiwib25TYW1lRnJ1aXRDb250YWN0IiwiYmluZCIsIm9uQ2hlY2tCb3VuZCIsIkR5bmFtaWMiLCJwaHlzaWNzQ2lyY2xlQ29sbGlkZXIiLCJhcHBseSIsInRvIiwic2V0UG9zaXRpb24iLCJzZWxmIiwib3RoZXIiLCJvZmYiLCJjcmVhdGVGcnVpdEp1aWNlIiwibmV3RnJ1aXQiLCJzdHJpbmciLCJTdHJpbmciLCJwYXJzZUludCIsImxhc3RfeCIsInNldFRpbWVvdXQiLCJlbmRfbXNnIiwibiIsImF1ZGlvRW5naW5lIiwicGxheSIsImp1aWNlIiwic2hvd0p1aWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQU1BLEtBQUssR0FBR0MsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDbkJDLEVBQUFBLElBQUksRUFBRSxXQURhO0FBRW5CQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsRUFBRSxFQUFFLENBREk7QUFFUkMsSUFBQUEsTUFBTSxFQUFFTCxFQUFFLENBQUNNO0FBRkg7QUFGTyxDQUFULENBQWQ7QUFRQSxJQUFNQyxTQUFTLEdBQUdQLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ3ZCQyxFQUFBQSxJQUFJLEVBQUUsV0FEaUI7QUFFdkJDLEVBQUFBLFVBQVUsRUFBRTtBQUNSSyxJ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LENBQUNMLE1BQVIsR0FBaUIsZUFBZSxNQUFJLENBQUN6RixLQUFwQixHQUE0QixPQUE3QztBQUNIOztBQUNELFVBQUEsTUFBSSxDQUFDTSxLQUFMLEdBQWEsSUFBYjtBQUNIO0FBQ0osT0FoQlMsRUFnQlAsSUFoQk8sQ0FBVjtBQWlCSDtBQUNKLEdBN1VJO0FBK1VMO0FBQ0FpRixFQUFBQSxnQkFoVkssNEJBZ1ZZbkgsRUFoVlosRUFnVmdCK0UsR0FoVmhCLEVBZ1ZxQjRDLENBaFZyQixFQWdWd0I7QUFDekI7QUFDQS9ILElBQUFBLEVBQUUsQ0FBQ2dJLFdBQUgsQ0FBZUMsSUFBZixDQUFvQixLQUFLekcsU0FBekIsRUFBb0MsS0FBcEMsRUFBMkMsQ0FBM0M7QUFDQXhCLElBQUFBLEVBQUUsQ0FBQ2dJLFdBQUgsQ0FBZUMsSUFBZixDQUFvQixLQUFLdEcsVUFBekIsRUFBcUMsS0FBckMsRUFBNEMsQ0FBNUMsRUFIeUIsQ0FLekI7O0FBQ0EsUUFBSXVHLEtBQUssR0FBR2xJLEVBQUUsQ0FBQ3FHLFdBQUgsQ0FBZSxLQUFLOUUsV0FBcEIsQ0FBWjtBQUNBLFNBQUtPLElBQUwsQ0FBVTRFLFFBQVYsQ0FBbUJ3QixLQUFuQjtBQUVBLFFBQU01QixNQUFNLEdBQUcsS0FBS2xGLE1BQUwsQ0FBWWhCLEVBQUUsR0FBRyxDQUFqQixDQUFmO0FBQ0EsUUFBTW9ELFFBQVEsR0FBRzBFLEtBQUssQ0FBQ2pHLFlBQU4sQ0FBbUIsT0FBbkIsQ0FBakI7QUFDQXVCLElBQUFBLFFBQVEsQ0FBQytDLElBQVQsQ0FBY0QsTUFBZDtBQUNBOUMsSUFBQUEsUUFBUSxDQUFDMkUsU0FBVCxDQUFtQmhELEdBQW5CLEVBQXdCNEMsQ0FBeEI7QUFDSDtBQTdWSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBGcnVpdCA9IGNjLkNsYXNzKHtcbiAgICBuYW1lOiAnRnJ1aXRJdGVtJyxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGlkOiAwLFxuICAgICAgICBpY29uU0Y6IGNjLlNwcml0ZUZyYW1lXG4gICAgfVxufSk7XG5cbmNvbnN0IEp1aWNlSXRlbSA9IGNjLkNsYXNzKHtcbiAgICBuYW1lOiAnSnVpY2VJdGVtJyxcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHBhcnRpY2xlOiBjYy5TcHJpdGVGcmFtZSxcbiAgICAgICAgY2lyY2xlOiBjYy5TcHJpdGVGcmFtZSxcbiAgICAgICAgc2xhc2g6IGNjLlNwcml0ZUZyYW1lLFxuICAgIH1cbn0pO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBmcnVpdHM6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgICAgICAgdHlwZTogRnJ1aXRcbiAgICAgICAgfSxcblxuICAgICAgICB0aXRsZVRleHQ6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG5cbiAgICAgICAgc2NvcmU6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXG4gICAgICAgIH0sXG5cbiAgICAgICAgZ3JvdW5kOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuXG4gICAgICAgIGVuZE5vZGVCRzoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLk5vZGVcbiAgICAgICAgfSxcblxuICAgICAgICBlbmROb2RlOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxuICAgICAgICB9LFxuXG4gICAgICAgIGp1aWNlczoge1xuICAgICAgICAgICAgZGVmYXVsdDogW10sXG4gICAgICAgICAgICB0eXBlOiBKdWljZUl0ZW1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyDliqjmgIHnlJ/miJAg5om+5Yiw5om56YeP5aSE55CG6aKE572u5YWD57Sg55qE5pa55qGIXG4gICAgICAgIGZydWl0UHJlZmFiOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuUHJlZmFiXG4gICAgICAgIH0sXG5cbiAgICAgICAganVpY2VQcmVmYWI6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWJcbiAgICAgICAgfSxcblxuICAgICAgICAvLyB0b2RvIOWPr+S7peWunueOsOS4gOS4qmF1ZGlvTWFuYWdlclxuICAgICAgICBib29tQXVkaW86IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAga25vY2tBdWRpbzoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkF1ZGlvQ2xpcFxuICAgICAgICB9LFxuICAgICAgICB3YXRlckF1ZGlvOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuQXVkaW9DbGlwXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgb25Mb2FkKCkge1xuICAgICAgICAvLyDorrDlvZXlvZPliY3lsY/luZXlpKflsI9cbiAgICAgICAgdGhpcy5sYXN0V2lkdGggPSB0aGlzLm5vZGUud2lkdGg7XG5cbiAgICAgICAgLy8g6K6w5b2V5YyX5Lqs5p6X5Lia5pWw6YePXG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuXG4gICAgICAgIHRoaXMuc2NvcmUgPSB0aGlzLnNjb3JlLmdldENvbXBvbmVudChjYy5MYWJlbCk7XG5cbiAgICAgICAgLy8g6K6+572u5Zyw6Z2i5L2N572uXG4gICAgICAgIHRoaXMuZ3JvdW5kLnkgPSAxNTtcblxuICAgICAgICB0aGlzLmlzQ3JlYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mcnVpdENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5pc0VuZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIOi3neemu+S4iui+ueeVjOeahOS9jee9rlxuICAgICAgICB0aGlzLnRvcEJvdW5kID0gMTU7XG4gICAgICAgIC8vIOWcsOmdouS9jee9rlxuICAgICAgICB0aGlzLmJ1dHRvbUJvdW5kID0gMTU7XG5cbiAgICAgICAgdGhpcy5pbml0UGh5c2ljcygpO1xuICAgICAgICB0aGlzLmluaXRCb3VuZCgpO1xuXG4gICAgICAgIC8vIOebkeWQrOeCueWHu+S6i+S7tiB0b2RvIOaYr+WQpuiDveWkn+azqOWGjOWFqOWxgOS6i+S7tlxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCB0aGlzLm9uVG91Y2hFbmQsIHRoaXMpO1xuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfTU9WRSwgdGhpcy5vblRvdWNoTW92ZSwgdGhpcyk7XG5cbiAgICAgICAgY2Mudmlldy5yZXNpemVXaXRoQnJvd3NlclNpemUoZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuaW5pdE9uZUZydWl0KCk7XG5cbiAgICAgICAgY29uc3QgbWV0YSA9IFtcbiAgICAgICAgICAgIFwi5byA5Y+R6ICFOuWOn+mhueebruW8gOWPkSjmmoLmnKrmib7liLApLEppbll1XCIsXG4gICAgICAgICAgICBcIuacrOmhueebruS7k+W6k+WcsOWdgO+8mmh0dHBzOi8vZ2l0aHViLmNvbS9LaW5nZmlzaDQwNC9NYWtlLVdVVFwiLFxuICAgICAgICAgICAgXCLljp/pobnnm67vvJrmrabmsYnnkIblt6XlpKflraZcIixcbiAgICAgICAgICAgIFwi5YyX5Lqs5p6X5Lia5aSn5a2m5L+h5oGv5a2m6Zmi5pWw5a2X5aqS5L2T5oqA5pyvIEJ5Q1pIXCIsXG4gICAgICAgICAgICBcIue/u+WItmRhdGU6MjAyMi0wMS0yNVwiLFxuICAgICAgICBdXG5cbiAgICAgICAgZm9yIChsZXQgaSBvZiBtZXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyDlvIDlkK/niannkIblvJXmk47lkoznorDmkp7mo4DmtYtcbiAgICBpbml0UGh5c2ljcygpIHtcbiAgICAgICAgLy8g54mp55CG5byV5pOOXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gY2MuZGlyZWN0b3IuZ2V0UGh5c2ljc01hbmFnZXIoKTtcbiAgICAgICAgaW5zdGFuY2UuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIC8vIGluc3RhbmNlLmRlYnVnRHJhd0ZsYWdzID0gNFxuICAgICAgICBpbnN0YW5jZS5ncmF2aXR5ID0gY2MudjIoMCwgLTk2MCk7XG5cbiAgICAgICAgLy8g56Kw5pKe5qOA5rWLXG4gICAgICAgIGNvbnN0IGNvbGxpc2lvbk1hbmFnZXIgPSBjYy5kaXJlY3Rvci5nZXRDb2xsaXNpb25NYW5hZ2VyKCk7XG4gICAgICAgIGNvbGxpc2lvbk1hbmFnZXIuZW5hYmxlZCA9IHRydWVcbiAgICB9LFxuXG4gICAgLy8g6K6+572u6L6555WM5ZKMVUnkvY3nva5cbiAgICBpbml0Qm91bmQoKSB7XG4gICAgICAgIC8vIOiuvue9ruagh+mimOS9jee9rlxuICAgICAgICB0aGlzLnRpdGxlVGV4dC54ID0gMTU7XG5cbiAgICAgICAgLy8g6K6+572u5YiG5pWw5L2N572uXG4gICAgICAgIHRoaXMuc2NvcmUubm9kZS54ID0gdGhpcy5ub2RlLndpZHRoIC0gMTU7XG5cbiAgICAgICAgLy8g6K6+572u5Zub5ZGo55qE56Kw5pKe5Yy65Z+fXG4gICAgICAgIGxldCB3aWR0aCA9IHRoaXMubm9kZS53aWR0aDtcbiAgICAgICAgbGV0IGhlaWdodCA9IHRoaXMubm9kZS5oZWlnaHQ7XG5cbiAgICAgICAgbGV0IG5vZGUgPSBuZXcgY2MuTm9kZSgpO1xuXG4gICAgICAgIGxldCBib2R5ID0gbm9kZS5hZGRDb21wb25lbnQoY2MuUmlnaWRCb2R5KTtcbiAgICAgICAgYm9keS50eXBlID0gY2MuUmlnaWRCb2R5VHlwZS5TdGF0aWM7XG5cbiAgICAgICAgY29uc3QgX2FkZEJvdW5kID0gKG5vZGUsIHgsIHksIHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgICAgICAgICAgIGxldCBjb2xsaWRlciA9IG5vZGUuYWRkQ29tcG9uZW50KGNjLlBoeXNpY3NCb3hDb2xsaWRlcik7XG4gICAgICAgICAgICBjb2xsaWRlci5vZmZzZXQueCA9IHg7XG4gICAgICAgICAgICBjb2xsaWRlci5vZmZzZXQueSA9IHk7XG4gICAgICAgICAgICBjb2xsaWRlci5zaXplLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBjb2xsaWRlci5zaXplLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIF9hZGRCb3VuZChub2RlLCAwLCAtaGVpZ2h0IC8gMiArIHRoaXMuYnV0dG9tQm91bmQsIHdpZHRoLCAxKTtcbiAgICAgICAgX2FkZEJvdW5kKG5vZGUsIDAsIGhlaWdodCAvIDIsIHdpZHRoLCAxKTtcbiAgICAgICAgX2FkZEJvdW5kKG5vZGUsIC13aWR0aCAvIDIsIDAsIDEsIGhlaWdodCk7XG4gICAgICAgIF9hZGRCb3VuZChub2RlLCB3aWR0aCAvIDIsIDAsIDEsIGhlaWdodCk7XG5cbiAgICAgICAgbm9kZS5wYXJlbnQgPSB0aGlzLm5vZGU7XG4gICAgfSxcblxuICAgIGluaXRPbmVGcnVpdChpZCA9IDEpIHtcbiAgICAgICAgdGhpcy5mcnVpdENvdW50KytcbiAgICAgICAgdGhpcy5jdXJyZW50RnJ1aXQgPSB0aGlzLmNyZWF0ZUZydWl0T25Qb3MoMCwgNDAwLCBpZClcbiAgICB9LFxuXG4gICAgLy8g55uR5ZCs5bGP5bmV54K55Ye75a6M5q+VXG4gICAgb25Ub3VjaEVuZChlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ3JlYXRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEZydWl0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGN1ciA9IHRoaXMuY3VycmVudEZydWl0O1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZydWl0LnJlbW92ZUZyb21QYXJlbnQoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxhc3RXaWR0aCAhPSB0aGlzLm5vZGUud2lkdGgpIHtcbiAgICAgICAgICAgIC8vIOWxj+W5leWkp+Wwj+aUueWPmOS6hu+8jOmHjeaWsOiuvue9rui+ueeVjFxuICAgICAgICAgICAgdGhpcy5pbml0Qm91bmQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQ3JlYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IGZydWl0ID0gdGhpcy5jdXJyZW50RnJ1aXQ7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5ub2RlLndpZHRoO1xuICAgICAgICBjb25zdCBwb3MgPSBlLmdldExvY2F0aW9uKCk7XG4gICAgICAgIGxldCB4ID0gcG9zLnggLSB3aWR0aCAvIDI7XG4gICAgICAgIGZydWl0LnggPSB4O1xuXG4gICAgICAgIGNjLnR3ZWVuKGZydWl0KVxuICAgICAgICAgICAgLmJ5KDAsIHsgcG9zaXRpb246IGNjLnYyKDAsIDApIH0sIHsgZWFzaW5nOiB0ID0+IDEwMDAwMCAqIHQgKiB0IH0pXG4gICAgICAgICAgICAuY2FsbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8g5byA5ZCv54mp55CG5pWI5p6cXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEZydWl0UGh5c2ljcyhmcnVpdClcblxuICAgICAgICAgICAgICAgIC8vIDAuNzVz5ZCO6YeN5paw55Sf5oiQ5LiA5LiqXG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0SWQgPSB0aGlzLmdldE5leHRGcnVpdElkKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0T25lRnJ1aXQobmV4dElkKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ3JlYXRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH0sIDAuNzUpXG4gICAgICAgICAgICB9KS5zdGFydCgpO1xuICAgIH0sXG5cbiAgICAvLyDnm5HlkKzlsY/luZXnp7vliqhcbiAgICBvblRvdWNoTW92ZShlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ3JlYXRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5ub2RlLndpZHRoO1xuICAgICAgICBjb25zdCBwb3MgPSBlLmdldExvY2F0aW9uKCk7XG4gICAgICAgIGxldCB4O1xuICAgICAgICBpZiAocG9zLnggPD0gdGhpcy5jdXJyZW50RnJ1aXQud2lkdGggLyAyIHx8IHBvcy54ID49IHdpZHRoIC0gdGhpcy5jdXJyZW50RnJ1aXQud2lkdGggLyAyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4ID0gcG9zLnggLSB3aWR0aCAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50RnJ1aXQueCA9IHg7XG4gICAgfSxcblxuICAgIC8vIOiOt+WPluS4i+S4gOS4quawtOaenOeahGlkXG4gICAgZ2V0TmV4dEZydWl0SWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmZydWl0Q291bnQgPCAzKSB7XG4gICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZnJ1aXRDb3VudCA9PT0gMykge1xuICAgICAgICAgICAgcmV0dXJuIDJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOmaj+acuui/lOWbnuWJjTXkuKpcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSArIDFcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8g5Yib5bu65LiA5Liq5rC05p6cXG4gICAgY3JlYXRlT25lRnJ1aXQobnVtKSB7XG4gICAgICAgIGxldCBmcnVpdCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuZnJ1aXRQcmVmYWIpO1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmZydWl0c1tudW0gLSAxXTtcblxuICAgICAgICBmcnVpdC5nZXRDb21wb25lbnQoJ0ZydWl0JykuaW5pdCh7XG4gICAgICAgICAgICBpZDogY29uZmlnLmlkLFxuICAgICAgICAgICAgaWNvblNGOiBjb25maWcuaWNvblNGXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZydWl0LmdldENvbXBvbmVudChjYy5SaWdpZEJvZHkpLnR5cGUgPSBjYy5SaWdpZEJvZHlUeXBlLlN0YXRpYztcbiAgICAgICAgZnJ1aXQuZ2V0Q29tcG9uZW50KGNjLlBoeXNpY3NDaXJjbGVDb2xsaWRlcikucmFkaXVzID0gMDtcblxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoZnJ1aXQpO1xuICAgICAgICBmcnVpdC5zY2FsZSA9IDAuNjtcblxuICAgICAgICAvLyDmnIlGcnVpdOe7hOS7tuS8oOWFpVxuICAgICAgICBmcnVpdC5vbignc2FtZUNvbnRhY3QnLCB0aGlzLm9uU2FtZUZydWl0Q29udGFjdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgZnJ1aXQub24oJ2NoZWNrQm91bmQnLCB0aGlzLm9uQ2hlY2tCb3VuZC5iaW5kKHRoaXMpKTtcblxuICAgICAgICByZXR1cm4gZnJ1aXQ7XG4gICAgfSxcblxuICAgIHN0YXJ0RnJ1aXRQaHlzaWNzKGZydWl0KSB7XG4gICAgICAgIGZydWl0LmdldENvbXBvbmVudChjYy5SaWdpZEJvZHkpLnR5cGUgPSBjYy5SaWdpZEJvZHlUeXBlLkR5bmFtaWM7XG4gICAgICAgIGNvbnN0IHBoeXNpY3NDaXJjbGVDb2xsaWRlciA9IGZydWl0LmdldENvbXBvbmVudChjYy5QaHlzaWNzQ2lyY2xlQ29sbGlkZXIpO1xuICAgICAgICBwaHlzaWNzQ2lyY2xlQ29sbGlkZXIucmFkaXVzID0gZnJ1aXQuaGVpZ2h0IC8gMjtcbiAgICAgICAgcGh5c2ljc0NpcmNsZUNvbGxpZGVyLmFwcGx5KCk7XG4gICAgfSxcblxuICAgIC8vIOWcqOaMh+WumuS9jee9rueUn+aIkOawtOaenFxuICAgIGNyZWF0ZUZydWl0T25Qb3MoeCwgeSwgdHlwZSA9IDEpIHtcbiAgICAgICAgY29uc3QgZnJ1aXQgPSB0aGlzLmNyZWF0ZU9uZUZydWl0KHR5cGUpXG4gICAgICAgIGNjLnR3ZWVuKGZydWl0KVxuICAgICAgICAgICAgLnRvKDAuMjUsIHsgc2NhbGU6IDAuOCB9KVxuICAgICAgICAgICAgLnN0YXJ0KCk7XG4gICAgICAgIGZydWl0LnNldFBvc2l0aW9uKGNjLnYyKHgsIHkpKTtcbiAgICAgICAgcmV0dXJuIGZydWl0XG4gICAgfSxcbiAgICAvLyDkuKTkuKrmsLTmnpznorDmkp5cbiAgICBvblNhbWVGcnVpdENvbnRhY3QoeyBzZWxmLCBvdGhlciB9KSB7XG4gICAgICAgIG90aGVyLm5vZGUub2ZmKCdzYW1lQ29udGFjdCcpOyAvLyDkuKTkuKpub2Rl6YO95Lya6Kem5Y+R77yMdG9kbyDnnIvnnIvmnInmsqHmnInlhbbku5bmlrnms5Xlj6rlsZXnpLrkuIDmrKHnmoRcblxuICAgICAgICBjb25zdCBpZCA9IG90aGVyLmdldENvbXBvbmVudCgnRnJ1aXQnKS5pZDtcbiAgICAgICAgLy8gdG9kbyDlj6/ku6Xkvb/nlKjlr7nosaHmsaDlm57mlLZcbiAgICAgICAgc2VsZi5ub2RlLnJlbW92ZUZyb21QYXJlbnQoZmFsc2UpO1xuICAgICAgICBvdGhlci5ub2RlLnJlbW92ZUZyb21QYXJlbnQoZmFsc2UpO1xuXG4gICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gb3RoZXIubm9kZTtcblxuICAgICAgICB0aGlzLmNyZWF0ZUZydWl0SnVpY2UoaWQsIGNjLnYyKHsgeCwgeSB9KSwgb3RoZXIubm9kZS53aWR0aCk7XG5cbiAgICAgICAgbGV0IG5leHRJZCA9IGlkICsgMTtcbiAgICAgICAgaWYgKG5leHRJZCA8PSA5KSB7XG4gICAgICAgICAgICBpZiAobmV4dElkID09IDgpIHtcbiAgICAgICAgICAgICAgICAvLyDnu5/orqHmlbDph49cbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV4dElkID09IDkpIHtcbiAgICAgICAgICAgICAgICBuZXh0SWQgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3RnJ1aXQgPSB0aGlzLmNyZWF0ZUZydWl0T25Qb3MoeCwgeSwgbmV4dElkKTtcblxuICAgICAgICAgICAgLy8g5YiG5pWw57Sv5YqgXG4gICAgICAgICAgICB0aGlzLnNjb3JlLnN0cmluZyA9IFN0cmluZyhwYXJzZUludCh0aGlzLnNjb3JlLnN0cmluZykgKyBuZXh0SWQgKiAxMCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhcnRGcnVpdFBoeXNpY3MobmV3RnJ1aXQpO1xuXG4gICAgICAgICAgICAvLyDlsZXnpLrliqjnlLsgdG9kbyDliqjnlLvmlYjmnpzpnIDopoHosIPmlbRcbiAgICAgICAgICAgIG5ld0ZydWl0LnNjYWxlID0gMFxuICAgICAgICAgICAgY2MudHdlZW4obmV3RnJ1aXQpLnRvKC41LCB7XG4gICAgICAgICAgICAgICAgc2NhbGU6IDAuOFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGVhc2luZzogXCJiYWNrT3V0XCJcbiAgICAgICAgICAgIH0pLnN0YXJ0KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRvZG8g5ZCI5oiQ5Lik5Liq6KW/55OcXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnIHRvZG8g5ZCI5oiQ5Lik5Liq5pyA5aSn55qEIOi/mOayoeacieWunueOsOWTpn4gJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8g5qOA5rWL5b2T5YmN55qE5Lik5Liq5rC05p6c5piv5ZCm6LaF5Ye66L6555WM5LqGXG4gICAgb25DaGVja0JvdW5kKHsgc2VsZiwgb3RoZXIgfSkge1xuICAgICAgICBpZiAodGhpcy5sYXN0V2lkdGggPT0gdGhpcy5ub2RlLndpZHRoICYmIHNlbGYubm9kZS55ICsgc2VsZi5ub2RlLndpZHRoIC8gMiA+IHRoaXMubm9kZS55IC0gdGhpcy50b3BCb3VuZCkge1xuICAgICAgICAgICAgLy8gVE9ETyBmaXggYnVnIGluIGhlcmVcbiAgICAgICAgICAgIGNvbnN0IGxhc3RfeCA9IHNlbGYubm9kZS54O1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdFdpZHRoID09IHRoaXMubm9kZS53aWR0aCAmJiBsYXN0X3ggPT0gc2VsZi5ub2RlLnggJiYgc2VsZi5ub2RlLnkgKyBzZWxmLm5vZGUud2lkdGggLyAyID4gdGhpcy5ub2RlLnkgLSB0aGlzLnRvcEJvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6LaF5Ye66IyD5Zu05ZWmXCIpO1xuICAgICAgICAgICAgICAgICAgICAvLyDorr7nva7mmL7npLrnu5PmnZ9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmROb2RlLnggPSB0aGlzLm5vZGUud2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZE5vZGUueSA9IHRoaXMubm9kZS5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZE5vZGVCRy54ID0gdGhpcy5ub2RlLndpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmROb2RlQkcueSA9IHRoaXMubm9kZS5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kX21zZyA9IHRoaXMuZW5kTm9kZS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb3VudCA9PSAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZF9tc2cuc3RyaW5nID0gJ+aBreWWnOS9oOWQiOaIkOS6hlxcblxcbicgKyB0aGlzLmNvdW50ICsgJ+S4quWMl+ael+e7v+Wboic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTUwMCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8g5ZCI5bm25pe255qE5Yqo55S75pWI5p6cXG4gICAgY3JlYXRlRnJ1aXRKdWljZShpZCwgcG9zLCBuKSB7XG4gICAgICAgIC8vIOaSreaUvuWQiOW5tueahOWjsOmfs1xuICAgICAgICBjYy5hdWRpb0VuZ2luZS5wbGF5KHRoaXMuYm9vbUF1ZGlvLCBmYWxzZSwgMSk7XG4gICAgICAgIGNjLmF1ZGlvRW5naW5lLnBsYXkodGhpcy53YXRlckF1ZGlvLCBmYWxzZSwgMSk7XG5cbiAgICAgICAgLy8g5bGV56S65Yqo55S7XG4gICAgICAgIGxldCBqdWljZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuanVpY2VQcmVmYWIpO1xuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoanVpY2UpO1xuXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuanVpY2VzW2lkIC0gMV07XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0ganVpY2UuZ2V0Q29tcG9uZW50KCdKdWljZScpO1xuICAgICAgICBpbnN0YW5jZS5pbml0KGNvbmZpZyk7XG4gICAgICAgIGluc3RhbmNlLnNob3dKdWljZShwb3MsIG4pO1xuICAgIH1cbn0pOyJdfQ==